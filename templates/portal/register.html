 {% extends 'portal/base.html' %}
{% load static %}
{% block title %}
Signup
{% endblock %}
{% block login %}

<body class="inner_page login">
<div class="container">
    <div class="row column">
        <div class="card bg-light text-white col-md-6">
            <img src="{% static 'expt/img/cs front.jpeg' %}" class="card-img" alt="...">
            <div class="card-img-overlay">
                <h1 class="card-title fw-bold text-center text-wrap top-50 orange_color h2">We Teach Skills, You Drive</h1>
            </div>
        </div>
    <div class="col-md-6  mt-0 p-2 m-0 d-flex flex-column justify-content-center">
        <div class="row d-flex flex-column row-gutter">
            <div class="col-md-12 text-center">
                <img src="{% static 'expt/img/expert_logo-removebg-preview (1).png' %}" class="rlogo w-75" alt="">
                <h1 class="fw-bold primary-text text-center orange_color">Account Registration</h1>
                <span class="text-center ms-4 fw-semibold">To sign up, kindly fill the form below</span>
                <br /><br />
            </div>
        </div>
        <div class="card shadow reg-card pt-0">
            <div class="card-body dw-th">
                <form method="post" action="{% url 'register_user-url' %}">
                    {% csrf_token %}
                    {% if form.errors %}
                        <div class="alert alert-warning alert-dismissible fade show" role="alert">
                        your form has errors.
                            {% for field in form %}
                                {% if field.errors %}
                                    {{ field.errors }}
                                {% endif%}

                            {% endfor %}
                          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                    {% endif %}
                    <input hidden type="checkbox" checked="checked" data-val="true" data-val-required="The Student field is required." id="Student" name="Student" value="true" />
                    <input hidden type="checkbox" data-val="true" data-val-required="The Staff field is required." id="Staff" name="Staff" value="true" />

                    <div class="form-group">
                        <div class="mb-2">
                            <label class="fw-bold">Username </label>
                            {{ form.username }}
                            <span class="text-danger field-validation-valid" data-valmsg-for="Username" data-valmsg-replace="true"></span>
                        </div>
                        <label class="form-label fw-bold">Password</label>
                        <div class="input-group mb-2">
                            {{ form.password1 }}
                            <span class="input-group-text togglePassword" id="togglePassword">
                                <i class="ri-eye-off-line" style="cursor: pointer"></i>
                            </span>
                        </div>
                        <span class="text-danger field-validation-valid" data-valmsg-for="Password" data-valmsg-replace="true"></span>

                        <label class="form-label fw-bold">Confirm Password</label>
                        <div class="input-group mb-2">
                            {{ form.password2 }}
                            <span class="input-group-text togglePassword" id="toggleCPassword">
                                <i class="ri-eye-off-line" style="cursor: pointer"></i>
                            </span>
                        </div>
                        <span class="text-danger field-validation-valid" data-valmsg-for="PasswordConfirm" data-valmsg-replace="true"></span>
                        <div class="row">
                            <div class="col-md-2">
                                <a class="btn btn-link orange_color" data-bs-toggle="modal" href="#Register_Help"
                                   role="button">
                                    <i class="ri-questionnaire-line w-25 primary-text text-center" data-bs-toggle="tooltip" data-bs-placement="right"
                                      data-bs-custom-class="custom-tooltip" data-bs-title="help?"></i>
                                </a>
                            </div>
                                <div class="col-md-10 mb-2 d-flex flex-row justify-content-end">
                                    <div class="form-check text-start ms-2">
                                        <input class="form-check-input" type="radio" onchange="studCheck()" checked name="flexRadioDefault" id="flexRadioStudent">
                                        <label class="form-check-label fw-semibold" for="flexRadioDefault1">
                                            Student
                                        </label>
                                    </div>
                                    <div class="form-check  text-start ms-2">
                                        <input class="form-check-input" type="radio" onchange="staffCheck()" name="flexRadioDefault" id="flexRadioStaff">
                                        <label class="form-check-label fw-semibold" for="flexRadioDefault2">
                                            Employee
                                        </label>
                                    </div>
                                </div>

                        </div>

                        <button type="submit" class="btn btn-secondary w-75 orange_bg2 border-0" style="margin-left:15%;">Submit</button>
                    </div>
                <input name="__RequestVerificationToken" type="hidden" value="CfDJ8OvD65nM8nBLq68IkiIJlOl51d6LkSkaM9GqVZQvWxQencSOSmPQpv1ZvPn_Re4FdG-kDpIdhhlp95RSJQuTU0h9wU43haeFOrqqNysv1KXub46gYyrShnC7CZtpmcrJXrvGuOHMoemGWiaeVL8wTTM" /><input name="Student" type="hidden" value="false" /><input name="Staff" type="hidden" value="false" /></form>
            </div>
        </div>
        <p class="mt-3 text-center">
            Already have an account ? <span class="primary-text fw-bold">
                <a class="text-decoration-none" href="{% url 'login_user-url' %}"><span class="primary-text fw-bold orange_color2">Log In</span></a>
            </span>
            <br /><br />
            Copyright &copy;
            <script type="text/javascript">document.write(new Date().getFullYear());</script> - Expert Yomo Driving School
        </p>
    </div>
</div>

<div class="modal fade" id="Register_Help" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title primary-text" id="exampleModalLabel">Registration Guide</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
               <div>
                   <span class="fw-semibold">Please enter your Registration Number/Admission Number/PF No/Employee Number and password. A confirmation link will be sent to your email</span><br /><br />
                   <p class="text-danger">Still having challenges? kindly contact system admin for help</p>
               </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
</div>

    <script>

        function studCheck() {
            $("#flexRadioStaff").prop("checked", false);
            $("#Staff").prop("checked", false);
            $("#Student").prop("checked", true);
        }
        function staffCheck() {
            $("#flexRadioStudent").prop("checked", false);
            $("#Student").prop("checked", false);
            $("#Staff").prop("checked", true);
        }
    </script>
    <script>
    $(document).ready(function () {

    //password toggle
    $("#togglePassword,#toggleCPassword").on('click', function () {
        const inputs = $("#password,#cpassword");
        inputs.each(function (index, element) {
            element.getAttribute('type') === 'password' ? element.setAttribute('type', 'text') : element.setAttribute('type', 'password');
            this.classList.toggle("bi-eye");
        });
    });

});
    </script>
{% endblock %}
